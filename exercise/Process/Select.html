<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<style type="text/css">
			ul , p { width:300px; padding:0; margin:0; margin:0 auto; }
			p { padding-top:20px; }
			li { list-style:none; border-bottom:1px solid #333; height:30px; line-height:30px; }
			.yellow{
				background-color: yellow;
			}
			.red{
				background-color: red;
			}
			.hover{
				background-color: black;
			}
		</style>
	</head>
	<body>
		<ul>
			<!--<li><input type="checkbox" /></li>
			<li><input type="checkbox" /></li>
			<li><input type="checkbox" /></li>
			<li><input type="checkbox" /></li>
			<li><input type="checkbox" /></li>-->
		</ul>
		<p><input type="checkbox" id="all"/> 全选</p>
		<script type="text/javascript">
			function getTagName(ul,li){
				return (li ||document).getElementsByTagName(ul);
			}
			function getId(al){
				return document.getElementById(al);
			}
			var aul = getTagName('ul');
			var lis = getTagName('li',aul[0]);
			var inputs = getTagName('input',aul[0]);
			var cheAll = getId('all');
			var arr = ['red','yellow','blue'];
			var len = 6;
			var str = '';
			for (var i=0;i<len;i++) {
				str += '<li style="background-color:'+arr[i%arr.length]+';"><input type="checkbox" /></li>';
			}
			aul[0].innerHTML = str;
			for (var i=0;i<lis.length;i++) {
				
				(function(n){
					//鼠标移入;
					lis[n].onmouseover = function(){
						//判断input的checked有没有被选中;如果被选中li的背景颜色就为绿色,没被选中移入那个就为黑色;
						if(inputs[n].checked){
							lis[n].style.backgroundColor = 'green';
						}else{
							this.style.backgroundColor = 'black';
						}
					};
					//鼠标移出;
					lis[n].onmouseout = function(){
						//判断input的checked有没有被选中;如果被选中li的背景颜色就为绿色,没被选中就返回默认值;
						if(inputs[n].checked){
							lis[n].style.backgroundColor = 'green';
						}else{
							this.style.backgroundColor = arr[n%arr.length];
						}
					};
					//鼠标点击每一个按钮;
					inputs[n].onchange = function(){
						if(inputs[n].checked){
							lis[n].style.backgroundColor = 'green';
						}else{
							lis[n].style.backgroundColor = 'black';
						}
						cheAll.checked = isCheAll();
					};
				})(i)
				//鼠标点击全选按钮;
				cheAll.onclick = function(){
					for(var i=0;i<inputs.length;i++){
						if(cheAll.checked){
							inputs[i].checked = true;
							lis[i].style.backgroundColor = 'green';
						}else{
							inputs[i].checked = false;
							lis[i].style.backgroundColor = arr[i%arr.length];
						}
					}
				}
				//判断li里的每一个input的按钮有没有被点击中;如点击中的化就为false直到最后一个被点击中CheAll就被选中;
				function isCheAll(){
					for (var i=0;i<inputs.length;i++) {
						if(!inputs[i].checked){
							return false;
						}
					}
					return true;
				}
			}
		</script>
	</body>
</html>
